{% extends "base.html" %}

{% block title %}Customer Statement{% endblock %}

{% block extra_head %}
<style>
  .stmt-wrapper { padding: 36px 16px 60px; display:flex; justify-content:center; }
  .stmt-card {
    width:100%; max-width:1100px; background:#fff; border-radius:12px;
    padding:22px; box-shadow:0 6px 20px rgba(3,102,214,0.06);
  }
  .stmt-title { text-align:center; font-size:1.4rem; font-weight:800; margin-bottom:14px; }
  .stmt-controls { display:flex; justify-content:center; gap:10px; margin-bottom:18px; flex-wrap:wrap; }
  .stmt-controls .form-control { min-width:300px; max-width:60vw; }

  /* üî• Fix: Input white, proper look */
  .stmt-controls input.form-control {
      background: #fff !important;
      color: #000 !important;
      border: 1px solid #bfc9d6;
      height: 42px;
      font-size: 15px;
  }
  .stmt-controls input.form-control:focus {
      border-color: #007bff;
      box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);
  }
  .stmt-controls input.form-control::placeholder {
      color: #6d7681 !important;
  }

  .stmt-table { width:100%; border-collapse:collapse; }
  .stmt-table thead th {
    background: linear-gradient(180deg,#0d82ff,#007bff);
    color:#fff; padding:12px; font-weight:700; text-align:center;
  }
  .stmt-table td { padding:12px; border-top:1px solid #eef2f6; text-align:center; font-size:15px; }
  .stmt-table tbody tr:nth-child(even){ background:#fbfcff; }

  @media print {
    .stmt-controls, .btn, header, footer, .site-navbar { display:none !important; }
    body { background:#fff; }
    .stmt-card { box-shadow:none; padding:0; }
  }
</style>
{% endblock %}

{% block content %}
<div class="stmt-wrapper">
  <div class="stmt-card">

    <div class="stmt-title">üìÑ Customer Statement</div>

    <form method="get" class="stmt-controls">
      <input type="text" name="customer_name" value="{{ search_name }}" class="form-control" placeholder="Search Customer Name">
      <button type="submit" class="btn btn-primary">üîç Search</button>
    </form>

    <div class="table-responsive">
      <table class="stmt-table">
        <thead>
          <tr>
            <th style="width:130px;">Date</th>
            <th style="width:250px; text-align:left; padding-left:15px;">Customer</th>
            <th style="width:100px;">Bill No</th>
            <th style="width:120px;">Return</th>
            <th style="width:140px;">Paid</th>
            <th style="width:160px;">Total Amount</th>
            <th style="width:150px;">Remaining</th>
          </tr>
        </thead>

        <tbody>
        {% if bills %}
          {% for b in bills %}
            <tr>
              <td>{{ b.date|date:"d M Y" }}</td>
              <td style="text-align:left; padding-left:15px; font-weight:600;">{{ b.customer_name }}</td>
              <td>{{ b.bill_no }}</td>
              <td>‚Çπ{{ b.returns_total|floatformat:2 }}</td>
              <td>‚Çπ{{ b.positive_paid|floatformat:2 }}</td>
              <td><b>‚Çπ{{ b.total_amount|floatformat:2 }}</b></td>
              <td><b>‚Çπ{{ b.remaining_amount|floatformat:2 }}</b></td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="7" style="padding:18px; font-size:17px;">No data found</td>
          </tr>
        {% endif %}
        </tbody>
      </table>
    </div>

    <div class="text-center mt-3">
      <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Print</button>
    </div>

  </div>
</div>
{% endblock %}
